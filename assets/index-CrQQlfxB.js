const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ItemInputModal-CzWhCOla.js","./@arco-design-components-PYZEGJz4.js","./@arco-design-core-CalasKDw.js","./@vue-C_YPYkY_.js","./vendor-BDT1S0dt.js","./@arco-design-icon-C2erqxCg.js","./@arco-design-components-Doax-6-r.css","./echarts-xZI92s_e.js","./ItemInputModal-UfdFonvH.css"])))=>i.map(i=>d[i]);
import{u as O,v as I,D as n,J as e,a as te,a0 as u,G as p,W as M,S as r,A as N,B,r as R,a1 as ne,a2 as oe,w as se,n as ae,q as ie,a3 as re,s as le,a4 as ce,V as de,f as ue,a5 as me}from"./@vue-C_YPYkY_.js";import{by as J,bz as pe,bA as fe}from"./vendor-BDT1S0dt.js";import{T as _e,a as ge,P as ye,b as G,S as K,B as H,c as he,C as Z,M as L,d as T,E as Se,D as ve,L as xe,e as ke,f as Ie,h as be,j as Ce,k as we,l as Ae,m as De}from"./@arco-design-components-PYZEGJz4.js";import{y as F,z as Q,k as Le,A as Ve,B as Ee}from"./@arco-design-icon-C2erqxCg.js";import{i as Me}from"./echarts-xZI92s_e.js";import"./@arco-design-core-CalasKDw.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))m(o);new MutationObserver(o=>{for(const g of o)if(g.type==="childList")for(const y of g.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&m(y)}).observe(document,{childList:!0,subtree:!0});function c(o){const g={};return o.integrity&&(g.integrity=o.integrity),o.referrerPolicy&&(g.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?g.credentials="include":o.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function m(o){if(o.ep)return;o.ep=!0;const g=c(o);fetch(o.href,g)}})();const $e="modulepreload",Oe=function(_,s){return new URL(_,s).href},q={},Pe=function(s,c,m){let o=Promise.resolve();if(c&&c.length>0){let P=function(S){return Promise.all(S.map(w=>Promise.resolve(w).then(V=>({status:"fulfilled",value:V}),V=>({status:"rejected",reason:V}))))};const y=document.getElementsByTagName("link"),x=document.querySelector("meta[property=csp-nonce]"),A=x?.nonce||x?.getAttribute("nonce");o=P(c.map(S=>{if(S=Oe(S,m),S in q)return;q[S]=!0;const w=S.endsWith(".css"),V=w?'[rel="stylesheet"]':"";if(m)for(let i=y.length-1;i>=0;i--){const t=y[i];if(t.href===S&&(!w||t.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${S}"]${V}`))return;const b=document.createElement("link");if(b.rel=w?"stylesheet":$e,w||(b.as="script"),b.crossOrigin="",b.href=S,A&&b.setAttribute("nonce",A),document.head.appendChild(b),w)return new Promise((i,t)=>{b.addEventListener("load",i),b.addEventListener("error",()=>t(new Error(`Unable to preload CSS for ${S}`)))})}))}function g(y){const x=new Event("vite:preloadError",{cancelable:!0});if(x.payload=y,window.dispatchEvent(x),!x.defaultPrevented)throw y}return o.then(y=>{for(const x of y||[])x.status==="rejected"&&g(x.reason);return s().catch(g)})},W=J.Random,ze=()=>J.mock({"items|50-100":[{"id|+1":1,name:()=>W.ctitle(2,5)+"物品",description:()=>W.cparagraph(1,3),"needScore|1-10":1,"meaningScore|1-10":1,isDiscarded:!1}]}).items,X=pe("items",{state:()=>({items:[]}),actions:{initData(){this.items.length===0&&(this.items=ze())},addItem(_){const s=this.items.length>0?Math.max(...this.items.map(c=>c.id)):0;this.items.push({id:s+1,isDiscarded:!1,..._})},updateItem(_,s){const c=this.items.find(m=>m.id===_);c&&Object.assign(c,s)},markAsDiscarded(_){const s=this.items.find(c=>c.id===_);s&&(s.isDiscarded=!0)},clearItems(){this.items=[]},setItems(_){this.items=_}},getters:{activeItems:_=>_.items.filter(s=>!s.isDiscarded),totalItems:_=>_.items.length,discardItems:_=>_.items.filter(s=>s.needScore<=3&&s.meaningScore<=3&&!s.isDiscarded)}}),Y=(_,s)=>{const c=_.__vccOpts||_;for(const[m,o]of s)c[m]=o;return c},Ne={class:"input-container"},je={class:"card-header"},Re={style:{width:"200px",padding:"10px"}},Te={style:{width:"200px",padding:"10px"}},Ue={__name:"InputView",setup(_){const s=oe(()=>Pe(()=>import("./ItemInputModal-CzWhCOla.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)),c=X(),m=R(null),o=te({current:1,pageSize:10,showPageSize:!0,pageSizeOptions:[10,20,50,100]}),g=l=>{o.current=l},y=l=>{o.current=1,o.pageSize=l},x=()=>{const l=R(null);T.open({title:"录入物品",width:"600px",okText:"保存并继续",content:()=>ne(s,{ref:l}),onBeforeOk:d=>{const f=l.value?.validateAndGetData();f&&(c.addItem({name:f.name,description:f.description,needScore:f.needScore,meaningScore:f.meaningScore}),L.success("添加成功"),l.value?.resetForm()),d(!1)}})},A=l=>{T.confirm({title:"确认舍弃",content:`确定要舍弃"${l.name}"吗？`,onOk:()=>{c.markAsDiscarded(l.id),L.success("已标记为舍弃")}})},P=()=>{c.totalItems!==0&&T.warning({title:"确认清空",content:"确定要清空所有已录入的物品吗？此操作不可恢复。",onOk:()=>{c.clearItems(),L.success("已清空")}})},S=()=>{c.initData(),L.success("已生成测试数据")},w=()=>{if(c.totalItems===0){L.warning("暂无数据可导出");return}const l=JSON.stringify(c.items,null,2),d=new Blob([l],{type:"application/json"}),f=URL.createObjectURL(d),E=document.createElement("a");E.href=f,E.download=`declutter-items-${new Date().getTime()}.json`,E.click(),URL.revokeObjectURL(f),L.success("导出成功")},V=()=>{m.value.click()},b=l=>{const d=l.target.files[0];if(!d)return;const f=new FileReader;f.onload=E=>{try{const k=JSON.parse(E.target.result);Array.isArray(k)?k.every(D=>D.name&&D.needScore!==void 0&&D.meaningScore!==void 0)?(c.setItems(k),L.success("导入成功")):L.error("数据格式不正确，缺少必要字段"):L.error("数据格式不正确，应为数组")}catch(k){console.error(k),L.error("JSON 解析失败")}l.target.value=""},f.readAsText(d)};let i=null;const t=(l,d,f)=>{c.updateItem(l.id,{[d]:f}),i&&clearTimeout(i),i=setTimeout(()=>{L.success("更新成功"),i=null},800)},C=l=>l>5?"green":"gray",a=l=>l>5?"orange":"gray";return(l,d)=>{const f=H,E=he,k=ge,$=G,D=K,j=ye,U=_e,h=Z;return I(),O("div",Ne,[n(h,{class:"box-card list-card"},{title:e(()=>[r("div",je,[r("span",null,"物品管理 ("+M(u(c).totalItems)+")",1)])]),extra:e(()=>[n(E,null,{default:e(()=>[n(f,{type:"primary",onClick:x},{icon:e(()=>[n(u(Le))]),default:e(()=>[d[0]||(d[0]=p(" 录入物品 ",-1))]),_:1}),n(f,{onClick:S},{default:e(()=>[...d[1]||(d[1]=[p("生成测试数据",-1)])]),_:1}),n(f,{onClick:w},{default:e(()=>[...d[2]||(d[2]=[p("导出",-1)])]),_:1}),n(f,{status:"success",onClick:V},{default:e(()=>[...d[3]||(d[3]=[p("导入",-1)])]),_:1}),n(f,{status:"danger",type:"text",onClick:P},{default:e(()=>[...d[4]||(d[4]=[p("清空",-1)])]),_:1})]),_:1}),r("input",{type:"file",ref_key:"fileInput",ref:m,style:{display:"none"},accept:".json",onChange:b},null,544)]),default:e(()=>[n(U,{data:u(c).items,pagination:o,onPageChange:g,onPageSizeChange:y,style:{width:"100%"},scroll:{y:400}},{columns:e(()=>[n(k,{title:"ID","data-index":"id",width:80}),n(k,{title:"名称","data-index":"name"}),n(k,{title:"需求度","data-index":"needScore",sortable:""},{cell:e(({record:v})=>[n(j,{title:"调整需求度",trigger:"click"},{content:e(()=>[r("div",Re,[n(D,{modelValue:v.needScore,"onUpdate:modelValue":z=>v.needScore=z,min:1,max:10,step:.5,"show-input":"",onChange:z=>t(v,"needScore",z)},null,8,["modelValue","onUpdate:modelValue","onChange"])])]),default:e(()=>[n($,{color:C(v.needScore),style:{cursor:"pointer"}},{default:e(()=>[p(M(v.needScore)+" ",1),n(u(F))]),_:2},1032,["color"])]),_:2},1024)]),_:1}),n(k,{title:"意义","data-index":"meaningScore",sortable:""},{cell:e(({record:v})=>[n(j,{title:"调整意义度",trigger:"click"},{content:e(()=>[r("div",Te,[n(D,{modelValue:v.meaningScore,"onUpdate:modelValue":z=>v.meaningScore=z,min:1,max:10,step:.5,"show-input":"",onChange:z=>t(v,"meaningScore",z)},null,8,["modelValue","onUpdate:modelValue","onChange"])])]),default:e(()=>[n($,{color:a(v.meaningScore),style:{cursor:"pointer"}},{default:e(()=>[p(M(v.meaningScore)+" ",1),n(u(F))]),_:2},1032,["color"])]),_:2},1024)]),_:1}),n(k,{title:"状态","data-index":"isDiscarded"},{cell:e(({record:v})=>[v.isDiscarded?(I(),N($,{key:0,color:"gray"},{default:e(()=>[...d[5]||(d[5]=[p("已舍弃",-1)])]),_:1})):(I(),N($,{key:1,color:"arcoblue"},{default:e(()=>[...d[6]||(d[6]=[p("拥有",-1)])]),_:1}))]),_:1}),n(k,{title:"操作",width:120},{cell:e(({record:v})=>[v.isDiscarded?B("",!0):(I(),N(f,{key:0,type:"primary",status:"danger",size:"small",onClick:z=>A(v)},{icon:e(()=>[n(u(Q))]),default:e(()=>[d[7]||(d[7]=p(" 舍弃 ",-1))]),_:1},8,["onClick"]))]),_:1})]),_:1},8,["data","pagination"])]),_:1})])}}},Be=Y(Ue,[["__scopeId","data-v-de7d7d3b"]]),Fe={class:"stats-container"},qe={class:"main-layout"},We={class:"left-panel"},Je={class:"card-header"},Ge={key:0,class:"empty-container"},Ke={key:1},He={key:0,class:"quadrant-legend"},Ze={class:"discard-section"},Qe={class:"empty-list"},Xe={key:0,class:"right-panel"},Ye={key:0,class:"item-detail"},et={class:"description"},tt={class:"scores"},nt={class:"score-item"},ot={class:"score-header"},st={class:"score-item"},at={class:"score-header"},it={class:"action-area"},rt={key:1,class:"empty-detail"},lt={__name:"StatsView",setup(_){const s=X(),c=R(null);let m=null;const o=R(null);se(()=>s.items,()=>{m?P():s.totalItems>0&&ae(()=>{A()})},{deep:!0});const g=i=>{T.confirm({title:"确认丢弃",content:`确定要丢弃"${i.name}"吗？这将把它从统计图和推荐列表中移除。`,onOk:()=>{s.markAsDiscarded(i.id),L.success("已标记为丢弃"),o.value&&o.value.id===i.id&&(o.value=null)}})},y=(i,t,C)=>{s.updateItem(i,{[t]:C})};ie(()=>{s.totalItems>0&&A()}),re(()=>{m?m.resize():s.totalItems>0&&A()}),le(()=>{m&&m.dispose(),window.removeEventListener("resize",x)});const x=()=>{m&&m.resize()},A=()=>{c.value&&(m=Me(c.value),m.on("click",i=>{i.data&&i.data.rawItem&&(o.value=i.data.rawItem)}),m.getZr().on("click",i=>{i.target||(o.value=null)}),window.addEventListener("resize",x),P())},P=()=>{if(!m){A();return}const t=S(s.activeItems).map(a=>({name:a.name,value:[a.jitteredNeed,a.jitteredMeaning],originalValue:[a.needScore,a.meaningScore],itemStyle:{color:w(a.needScore,a.meaningScore)},rawItem:a})),C={title:{text:"物品分布图",left:"center"},tooltip:{formatter:function(a){const l=a.data.originalValue;return`<b>${a.name}</b><br/>需求度: ${l[0]}<br/>意义: ${l[1]}`}},grid:{left:"10%",right:"10%",bottom:"10%",top:"15%",containLabel:!0},xAxis:{name:"需求度 (Need)",nameLocation:"middle",nameGap:30,type:"value",min:0,max:11,interval:1,splitLine:{show:!1},axisLabel:{formatter:a=>a>=1&&a<=10?a:""}},yAxis:{name:"意义 (Meaning)",nameLocation:"middle",nameGap:30,type:"value",min:0,max:11,interval:1,splitLine:{show:!1},axisLabel:{formatter:a=>a>=1&&a<=10?a:""}},series:[{type:"scatter",symbolSize:20,data:t,markLine:{silent:!0,lineStyle:{color:"#999",type:"dashed"},data:[{xAxis:5.5},{yAxis:5.5}]},markArea:{silent:!0,itemStyle:{color:"transparent",borderWidth:0,opacity:.1},data:[[{name:"保留/珍藏",xAxis:5.5,yAxis:5.5,itemStyle:{color:"rgba(103, 194, 58, 0.2)"},label:{position:"inside",color:"#67C23A",fontSize:14,fontWeight:"bold"}},{xAxis:11,yAxis:11}],[{name:"纪念/储存",xAxis:0,yAxis:5.5,itemStyle:{color:"rgba(230, 162, 60, 0.2)"},label:{position:"inside",color:"#E6A23C",fontSize:14,fontWeight:"bold"}},{xAxis:5.5,yAxis:11}],[{name:"丢弃",xAxis:0,yAxis:0,itemStyle:{color:"rgba(245, 108, 108, 0.2)"},label:{position:"inside",color:"#F56C6C",fontSize:14,fontWeight:"bold"}},{xAxis:5.5,yAxis:5.5}],[{name:"消耗品",xAxis:5.5,yAxis:0,itemStyle:{color:"rgba(64, 158, 255, 0.2)"},label:{position:"inside",color:"#409EFF",fontSize:14,fontWeight:"bold"}},{xAxis:11,yAxis:5.5}]]}}]};m.setOption(C)},S=i=>{const t={};i.forEach(a=>{const l=`${a.needScore}-${a.meaningScore}`;t[l]||(t[l]=[]),t[l].push(a)});const C=[];return Object.values(t).forEach(a=>{if(a.length===1)C.push({...a[0],jitteredNeed:a[0].needScore,jitteredMeaning:a[0].meaningScore});else{const l=a.length,d=Math.min(.15+l*.02,.35);a.forEach((f,E)=>{const k=E/l*2*Math.PI,$=(a[0].needScore+a[0].meaningScore)*123,D=k+$;C.push({...f,jitteredNeed:f.needScore+d*Math.cos(D),jitteredMeaning:f.meaningScore+d*Math.sin(D)})})}}),C},w=(i,t)=>i>5.5&&t>5.5?"#67C23A":i<5.5&&t>5.5?"#E6A23C":i<5.5&&t<5.5?"#F56C6C":"#409EFF",V=i=>i>=8?"red":i>=5?"orange":"green",b=i=>i>=8?"gold":i>=5?"blue":"gray";return(i,t)=>{const C=G,a=H,l=Se,d=ve,f=Ie,E=Q,k=ke,$=xe,D=Z,j=K,U=Ve;return I(),O("div",Fe,[r("div",qe,[r("div",We,[n(D,null,{title:e(()=>[r("div",Je,[t[6]||(t[6]=r("span",null,"四象限分析",-1)),n(C,{color:"gray"},{default:e(()=>[p("总物品: "+M(u(s).totalItems),1)]),_:1})])]),default:e(()=>[u(s).totalItems===0?(I(),O("div",Ge,[n(l,{description:"暂无数据，请先录入物品"},{extra:e(()=>[n(a,{type:"primary",onClick:t[0]||(t[0]=h=>i.$emit("switchView","input"))},{default:e(()=>[...t[7]||(t[7]=[p("去录入",-1)])]),_:1})]),_:1})])):(I(),O("div",Ke,[r("div",{ref_key:"chartRef",ref:c,class:"chart-container"},null,512),u(s).totalItems>0?(I(),O("div",He,[...t[8]||(t[8]=[r("div",{class:"legend-item q1"},[r("span",{class:"dot"}),r("strong",null,"保留/珍藏"),p(": 我需要的 & 有意义的 ")],-1),r("div",{class:"legend-item q2"},[r("span",{class:"dot"}),r("strong",null,"纪念/储存"),p(": 不需要的 & 有意义的 ")],-1),r("div",{class:"legend-item q3"},[r("span",{class:"dot"}),r("strong",null,"丢弃/断舍离"),p(": 不需要的 & 无意义的 ")],-1),r("div",{class:"legend-item q4"},[r("span",{class:"dot"}),r("strong",null,"消耗品/工具"),p(": 我需要的 & 无意义的 ")],-1)])])):B("",!0)])),r("div",Ze,[n(d,{orientation:"left"},{default:e(()=>[p("推荐遗弃清单 ("+M(u(s).discardItems.length)+")",1)]),_:1}),n($,{data:u(s).discardItems,bordered:!1},{header:e(()=>[...t[9]||(t[9]=[p(" 以下物品需求度与意义度均较低 (≤3)，建议优先考虑断舍离 ",-1)])]),empty:e(()=>[r("div",Qe,[n(l,{description:"暂无推荐遗弃物品"})])]),item:e(({item:h})=>[(I(),N(k,{key:h.id},{actions:e(()=>[n(a,{type:"primary",status:"danger",size:"small",onClick:v=>g(h)},{icon:e(()=>[n(E)]),default:e(()=>[t[10]||(t[10]=p(" 丢弃 ",-1))]),_:1},8,["onClick"])]),default:e(()=>[n(f,{title:h.name,description:h.description},{avatar:e(()=>[n(C,{color:"red"},{default:e(()=>[p(M(h.needScore)+" / "+M(h.meaningScore),1)]),_:2},1024)]),_:2},1032,["title","description"])]),_:2},1024))]),_:1},8,["data"])])]),_:1})]),u(s).totalItems>0?(I(),O("div",Xe,[n(D,{class:"detail-card",title:"物品详情"},{default:e(()=>[u(o)?(I(),O("div",Ye,[r("h3",null,M(u(o).name),1),r("p",et,M(u(o).description||"暂无描述"),1),n(d),r("div",tt,[r("div",nt,[r("div",ot,[t[11]||(t[11]=r("span",{class:"label"},"需求度",-1)),n(C,{color:V(u(o).needScore)},{default:e(()=>[p(M(u(o).needScore),1)]),_:1},8,["color"])]),n(j,{modelValue:u(o).needScore,"onUpdate:modelValue":t[1]||(t[1]=h=>u(o).needScore=h),min:1,max:10,step:.5,style:{width:"100%",marginTop:"10px"},onChange:t[2]||(t[2]=h=>y(u(o).id,"needScore",h))},null,8,["modelValue"])]),r("div",st,[r("div",at,[t[12]||(t[12]=r("span",{class:"label"},"意义度",-1)),n(C,{color:b(u(o).meaningScore)},{default:e(()=>[p(M(u(o).meaningScore),1)]),_:1},8,["color"])]),n(j,{modelValue:u(o).meaningScore,"onUpdate:modelValue":t[3]||(t[3]=h=>u(o).meaningScore=h),min:1,max:10,style:{width:"100%",marginTop:"10px"},onChange:t[4]||(t[4]=h=>y(u(o).id,"meaningScore",h))},null,8,["modelValue"])])]),r("div",it,[n(a,{type:"primary",status:"danger",long:"",onClick:t[5]||(t[5]=h=>g(u(o)))},{default:e(()=>[...t[13]||(t[13]=[p("丢弃",-1)])]),_:1})])])):(I(),O("div",rt,[n(U,{class:"info-icon"}),t[14]||(t[14]=r("p",null,[p("点击左侧图表中的点"),r("br"),p("查看物品详情")],-1))]))]),_:1})])):B("",!0)])])}}},ct=Y(lt,[["__scopeId","data-v-dcdd9ded"]]),dt={class:"common-layout"},ut={__name:"App",setup(_){const s=R("input"),c=ue(()=>s.value==="input"?Be:ct),m=g=>{s.value=g},o=g=>{s.value=g};return(g,y)=>{const x=F,A=Ae,P=Ee,S=we,w=Ce,V=De,b=be;return I(),O("div",dt,[n(b,null,{default:e(()=>[n(w,null,{default:e(()=>[n(S,{"selected-keys":[u(s)],mode:"horizontal",onMenuItemClick:m},{default:e(()=>[n(A,{key:"input"},{icon:e(()=>[n(x)]),default:e(()=>[y[0]||(y[0]=p(" 物品管理 ",-1))]),_:1}),n(A,{key:"stats"},{icon:e(()=>[n(P)]),default:e(()=>[y[1]||(y[1]=p(" 四象限统计 ",-1))]),_:1})]),_:1},8,["selected-keys"])]),_:1}),n(V,null,{default:e(()=>[(I(),N(ce,null,[(I(),N(de(u(c)),{onSwitchView:o},null,32))],1024))]),_:1})]),_:1})])}}},ee=me(ut);ee.use(fe());ee.mount("#app");export{Y as _};
